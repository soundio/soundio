<!DOCTYPE html><html lang="en" is="sparky" class="js"><head>
    <meta charset="utf-8">
    <meta name="author" content="@stephband">
    <meta name="description" content="Documentation for Soundstage. An audio node graph, sequencing engine, MIDI controller and JSON schema for the Web Audio API.">
    <meta name="viewport" content="width=device-width">

    <title>Soundstage</title>

    <script>
    document.documentElement.className = 'js';
    window.DEBUG = true;
    </script>

    <link rel="shortcut icon" href="images/logo-64x64.ico">
    <link rel="icon" type="image/png" href="images/logo-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="images/logo-64x64.png" sizes="64x64">
    <link rel="icon" type="image/png" href="images/logo-128x128.png" sizes="128x128">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono:100,300,400,500,700">
    <link rel="stylesheet" href="../bolt/dist/bolt.css">
    <link rel="stylesheet" href="../dom/css/dom.css">
    <link rel="stylesheet" href="../fn/css/prism.cruncher.css">
    <link rel="stylesheet" href="../fn/css/docs.css">
    <link rel="stylesheet" href="../fn/css/tests.css">
    <link rel="stylesheet" href="css/theme.css">

    <template id="functions">
        <article build-fn="each append:body" class="toggle-block block" toggleable="" id="{[id]}">
            <h3 class="text-5 {[prefix|is:'.'|yesno:'dot-indent','']}">
                <a href="#{[id]}">
                    <code build-fn="append:title" class="language-js"></code>
                </a>
            </h3>
        </article>
    </template>
</head>

<body>
    <header class="1-grid grid" id="header">
        <h1 class="grid-0 midi-icon">Soundstage <span class="text-6">0.8.0</span></h1>

        <div class="grid-1">
            <p class="text-8">
                An audio node graph, sequencing engine, MIDI controller and JSON schema for the Web Audio API.
                <span id="support-hint" style="color: #bf004c;"></span>
                Currently <a href="https://brave.com/">Brave</a> and Chrome support the <a href="https://caniuse.com/#feat=midi">WebMIDI API</a>.
                Firefox have had it <a href="https://github.com/mozilla/standards-positions/issues/58">under consideration</a> for some time.
            </p>

            <ul class="link-index index">
                <li><strong>repo:</strong> <a href="https://github.com/soundio/soundstage.git">https://github.com/soundio/soundstage.git</a></li>
                <li><strong>bugs:</strong> <a href="https://github.com/soundio/soundstage/issues">https://github.com/soundio/soundstage/issues</a></li>
            </ul>
        </div>
    </header>

    <!--div class="demo-block block site-grid grid">
        <div class="midi-graph grid-1" id="midi-graph">
            <p class="text-8 hint" id="instrument-hint">Plug in a MIDI instrument to try out the <code>&lt;midi-graph&gt;</code> component&hellip;</p>
            <midi-graph/>
        </div>
    </div-->

    <section class="1-grid grid">
        <header class="grid-0">
            <h2 class="text-2" style="font-size: 1.875rem;">Quick start</h2>
            <pre class=" language-js"><code class=" language-js"><span class="token comment">// Import MIDI functions as object</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> <span class="token constant">MIDI</span> <span class="token keyword">from</span> <span class="token string">'http://stephen.band/midi/midi.js'</span><span class="token punctuation">;</span>

<span class="token comment">// Listen to incoming 'noteon' and 'noteoff' messages on channel 1</span>
<span class="token constant">MIDI</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">{</span>channel<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> type<span class="token punctuation">:</span> <span class="token string">'note'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Time, port and message are properties of the DOM event</span>
    <span class="token keyword">const</span> time    <span class="token operator">=</span> e<span class="token punctuation">.</span>timeStamp<span class="token punctuation">;</span>
    <span class="token keyword">const</span> port    <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
    <span class="token keyword">const</span> message <span class="token operator">=</span> e<span class="token punctuation">.</span>data<span class="token punctuation">;</span>

    <span class="token comment">// Get the note name</span>
    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token constant">MIDI</span><span class="token punctuation">.</span><span class="token function">toNoteName</span><span class="token punctuation">(</span>message<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Normalise velocity to the range 0-1</span>
    <span class="token keyword">const</span> velocity <span class="token operator">=</span> <span class="token constant">MIDI</span><span class="token punctuation">.</span><span class="token function">int7ToFloat</span><span class="token punctuation">(</span>message<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

            <p>On this page, functions have been imported to the object <code>window.MIDI</code> so that you may play with them in the console.</p>
        </header>
    </section>

    <section class="1-2-3-grid grid">
        <header class="grid-0">
            <h2 class="text-2" style="font-size: 1.875rem;">Functions</h2>
            <pre class=" language-js"><code class=" language-js"><span class="token comment">// Import Soundstage</span>
<span class="token keyword">import</span> Soundstage <span class="token keyword">from</span> <span class="token string">'http://stephen.band/soundstage/soundstage.js'</span><span class="token punctuation">;</span></code></pre>
        </header>

        <h2 class="text-3 grid-1">Soundstage()</h2>

        <!--section class="grid-2">
            <h3 class="text-4">Properties</h3>
            <article template-fn="docs:'./modules/sequence.js?name','./modules/soundstage.js','./modules/graph.js?plugins,connections','./modules/sequence.js?events,sequences' each append:body" class="toggle-block block" toggleable id="{[id]}">
                <h3 class="text-5 {[prefix|is:'.'|yesno:'dot-indent','']}">
                    <a href="#{[id]}">
                        <code template-fn="html:title" class="language-js"></code>
                    </a>
                </h3>
            </article>
        </section-->

        <section class="grid-3">
            <h3 class="text-4">Methods</h3>

        <!--article--><article class="toggle-block block" toggleable="" id="create-type-settings">
            <h3 class="text-5 dot-indent">
                <a href="#create-type-settings">
                    <code class="language-js"><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> settings<span class="token punctuation">)</span></code>
                </a>
            </h3>
        <p>Create a new node of <code>type</code>.</p>
</article><article class="toggle-block block" toggleable="" id="get-id">
            <h3 class="text-5 dot-indent">
                <a href="#get-id">
                    <code class="language-js"><span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span></code>
                </a>
            </h3>
        <p>Return the plugin with <code>id</code>, or undefined.</p>
</article><article class="toggle-block block" toggleable="" id="start-time-beat">
            <h3 class="text-5 dot-indent">
                <a href="#start-time-beat">
                    <code class="language-js"><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span>time<span class="token punctuation">,</span> beat<span class="token punctuation">)</span></code>
                </a>
            </h3>
        <p>Starts the sequencer from <code>beat</code> at <code>time</code>.</p>
</article><article class="toggle-block block" toggleable="" id="stop-time">
            <h3 class="text-5 dot-indent">
                <a href="#stop-time">
                    <code class="language-js"><span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span></code>
                </a>
            </h3>
        <p>Stops the sequencer <code>time</code>.</p>
</article><article class="toggle-block block" toggleable="" id="cue-beat-fn">
            <h3 class="text-5 dot-indent">
                <a href="#cue-beat-fn">
                    <code class="language-js"><span class="token punctuation">.</span><span class="token function">cue</span><span class="token punctuation">(</span>beat<span class="token punctuation">,</span> fn<span class="token punctuation">)</span></code>
                </a>
            </h3>
        <p>Cues <code>fn</code> to be called on beat.</p>
</article><article class="toggle-block block" toggleable="" id="beatattime-time">
            <h3 class="text-5 dot-indent">
                <a href="#beatattime-time">
                    <code class="language-js"><span class="token punctuation">.</span><span class="token function">beatAtTime</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span></code>
                </a>
            </h3>
        <p>Returns the beat at a given <code>time</code>.</p>
</article><article class="toggle-block block" toggleable="" id="timeatbeat-beat">
            <h3 class="text-5 dot-indent">
                <a href="#timeatbeat-beat">
                    <code class="language-js"><span class="token punctuation">.</span><span class="token function">timeAtBeat</span><span class="token punctuation">(</span>beat<span class="token punctuation">)</span></code>
                </a>
            </h3>
        <p>Returns the time at a given <code>beat</code>.</p>
</article><article class="toggle-block block" toggleable="" id="beatattimeautomation-e0-e1-time">
            <h3 class="text-5 ">
                <a href="#beatattimeautomation-e0-e1-time">
                    <code class="language-js"><span class="token function">beatAtTimeAutomation</span><span class="token punctuation">(</span>e0<span class="token punctuation">,</span> e1<span class="token punctuation">,</span> time<span class="token punctuation">)</span></code>
                </a>
            </h3>
        <p>Returns the rate beat at a given <code>time</code>.</p>
</article><article class="toggle-block block" toggleable="" id="timeatbeatautomation-e0-e1-beat">
            <h3 class="text-5 ">
                <a href="#timeatbeatautomation-e0-e1-beat">
                    <code class="language-js"><span class="token function">timeAtBeatAutomation</span><span class="token punctuation">(</span>e0<span class="token punctuation">,</span> e1<span class="token punctuation">,</span> beat<span class="token punctuation">)</span></code>
                </a>
            </h3>
        <p>Returns the time of a given rate <code>beat</code>.</p>
</article><article class="toggle-block block" toggleable="" id="locationatbeat-beat">
            <h3 class="text-5 dot-indent">
                <a href="#locationatbeat-beat">
                    <code class="language-js"><span class="token punctuation">.</span><span class="token function">locationAtBeat</span><span class="token punctuation">(</span>beat<span class="token punctuation">)</span></code>
                </a>
            </h3>
        <p>Returns the location of a given <code>beat</code>.</p>
</article><article class="toggle-block block" toggleable="" id="beatatlocation-location">
            <h3 class="text-5 dot-indent">
                <a href="#beatatlocation-location">
                    <code class="language-js"><span class="token punctuation">.</span><span class="token function">beatAtLocation</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span></code>
                </a>
            </h3>
        <p>Returns the beat at a given <code>location</code>.</p>
</article><article class="toggle-block block" toggleable="" id="beatatbar-bar">
            <h3 class="text-5 dot-indent">
                <a href="#beatatbar-bar">
                    <code class="language-js"><span class="token punctuation">.</span><span class="token function">beatAtBar</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span></code>
                </a>
            </h3>
        <p>Returns the beat at a given <code>bar</code>.</p>
</article><article class="toggle-block block" toggleable="" id="baratbeat-beat">
            <h3 class="text-5 dot-indent">
                <a href="#baratbeat-beat">
                    <code class="language-js"><span class="token punctuation">.</span><span class="token function">barAtBeat</span><span class="token punctuation">(</span>beat<span class="token punctuation">)</span></code>
                </a>
            </h3>
        <p>Returns the bar at a given <code>beat</code>.</p>
</article><article class="toggle-block block" toggleable="" id="timeatdomtime-domtime">
            <h3 class="text-5 dot-indent">
                <a href="#timeatdomtime-domtime">
                    <code class="language-js"><span class="token punctuation">.</span><span class="token function">timeAtDomTime</span><span class="token punctuation">(</span>domTime<span class="token punctuation">)</span></code>
                </a>
            </h3>
        <p>Returns audio context time at a given DOM time, where <code>domTime</code> is a time in
seconds relative to window.performance.now().</p>
</article>

        </section>
    </section>



    <!-- Document interactivity -->
    <script type="module">
    import '../dom/js/dom.root.js';
    import '../dom/js/dom.toggleable.js';
    </script>

    <!-- Tests -->
    <script type="module">
    import './test/instrument.test.js';
    </script>

</body></html>
